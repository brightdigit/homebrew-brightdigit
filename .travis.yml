language: objective-c
osx_image: xcode8
before_install:
  - brew remove --ignore-dependencies --force $(brew list)
  - brew cleanup -s
  - rm -rf $(brew --cache)
  - brew update
  - brew install openssl libyaml
install:
  - mkdir -p $(brew --repo)/Library/Taps/travis
  - ln -s $PWD $(brew --repo)/Library/Taps/travis/homebrew-testtap
  - brew tap --repair
  - gem install rubocop --no-document
env:
  - PACKAGE=speculid
script:
  - rubocop --config=$(brew --repo)/Library/.rubocop.yml Formula/$PACKAGE.rb
  - brew audit $PACKAGE
  - brew install $PACKAGE
  - brew test $PACKAGE
